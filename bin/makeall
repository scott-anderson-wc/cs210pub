#!/bin/bash

if [ $# -eq 0 ]; then
    echo "Usage: $0 [-force] yes"
    exit
fi

if [ $1 = '-force' ]; then
    force='-force'
    shift
else
    force=''
fi

if [ $1 != 'yes' ]; then
    exit
fi

if [ ! -x "bin/makepage.py" ]; then
    echo "Can't find the bin/makepage.py script"
    echo "Please run this script in the top git directory"
    echo "That's the same directory as the .git dir and the .gitignore file"
    exit
fi

bin/makepage.py $force index.md 
bin/makepage.py $force reading/*.md reading/*.part
bin/makepage.py $force lectures/*/*.md 
# special for the combined reading
cd reading
cat HTML.part URLs.part CSS1.part fonts.part accessibility.md > all.md
cd ..
bin/makepage.py $force reading/all.md
