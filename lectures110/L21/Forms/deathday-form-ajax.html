<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Sample Form</title>
   <style>
      h1 {text-align: center;}
   </style>
</head>

<body>
  <h1>PHP Email Form </h1>
  
  <h2>RSVP to Deathday Party</h2>
  
  <form id="rsvp-form" method="post" action="http://cs.wellesley.edu/~cs110/php/deathday-rsvp.php">
      <p><label>Your Name:
          <input type="text" name="from_name">
        </label>
      <p><label>Your Email:
          <input type="text" name="from_email">
        </label>
      <p><input id="normal_send_button" type="submit" value="Submit form normally">   
      <p><input id="ajax_send_button" type="button" value="Submit form via Ajax">   
   </form>
   
<p id="response_element"></p>

<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
<script>
function handleResponse(responseObj) {
    console.log("response is "+responseObj.status+" and "+responseObj.text);
    if( responseObj.status == "ok" ) {
       $("#response_element").html(responseObj.text).css("color","green");
    } else {
       $("#response_element").html(responseObj.text).css("color","red");
    }
}

function sendmail () {
    var where = $("#rsvp-form").attr("action");
    var fn = $("#rsvp-form [name=from_name]").val();
    var fe = $("#rsvp-form [name=from_email]").val();
    var what = {from_name: fn, from_email: fe };
    $.post( where, what, handleResponse, "json");
}       

$("#ajax_send_button").click(sendmail);
</script>

</body>
</html>
