<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Ajax v1</title>
  <style>
    body {
      font-family: Verdana, sans-serif;
    }
     h2 {
        cursor: pointer;
     }
   </style>
</head>

<body>
  <header><h1>Update the page with Ajax calls</h1></header>

  <main>
    <p>Click on the header below to append a (random) character to the
    list. Information about timing is written to the JS console.
        
   <h2 id="sec1">Get Random Character</h2>
   <ol id="list1"></ol>
  </main>
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>   
  
 <script>
var pageLoadedTime = Date.now();

function since() {
    return Date.now() - pageLoadedTime;
}

var serverData;

$("#sec1").click(requestData);

function requestData() {
    console.log("Requesting data from the server at " + since() + " milliseconds.");
    $.get("http://cs.wellesley.edu/~cs110/lectures/L21/Forms/characters.json",getData,"json");
}

function getData (data) {
    console.log("Got data from the server at " + since() + " milliseconds.");
    serverData = data;                           
    var person = randomElt(data);
    $("#list1").append("<li>"+person+"</li>");
}

// Don't worry about how this works. It allows you to delete elements by clicking.

var ol_click;

function removeListItem(event) {
    ol_click = event;
    if(event.target.tagName=="LI") {
        $(event.target).remove();
    }
}    

$("ol").click(removeListItem);

function randomElt(array) {
    return array[Math.floor(array.length*Math.random())];
}



</script> 

</body>
</html>
