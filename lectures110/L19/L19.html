<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class Activities</title>
    <!-- use relative pathnames in #include so when this site is archived,
         say as cs110f15, the include refers to the same file -->
    <!--#set var="reltop" value="../../" -->
    <!--#include virtual="../../modularity/bs-head-rel.part" -->
    <style>
      #TOC_list {list-style-type: none;}

      img.full { width: 100%; }
      img.half { width: 49%; }
    </style>
    
  </head>
  <body>
    <!--#include virtual="../../modularity/navbar-rel.part" -->

    <div class="container">
      <h1>Objects and Animations</h1>
      <hr>
    </div>
      
    <div class="container">
      <div class="row">
     
        <div class="col-md-3">
          <div class="bs-sidebar hidden-print" role="complementary">
            <ul class="nav bs-sidenav">  
              <div id="insert_TOC_here"></div>
            </ul>
          </div>
        </div>

        <div class="col-md-8">
          
<h2>Goal</h2>

<p>By the end of today, you will be able to:
  <ol>
    <li>Understand how to create and use <em>JS Object Literals</em>.
      
    <li>Understand how JS animations work and how to use
    the <code>.animate()</code> method.

    <li>Create a cool sliding slideshow.

  </ol>

<h2 id="recap">Recap</h2>

<p>We learned about <em>JS Object Literals</em> and <em>animated
  slideshows</em>. We'll talk about animation a bit later.

<h2>JS Objects and Object Literals</h2>

<ul>
  <li>A data structure for multiple values: a set of <em>properties</em>
  and <em>values</em>.
    
  <li>The values can be any datatype (strings, numbers, booleans, dates)
    
  <li>The values are accessed by their <em>property
      name</em>: <code>fred.age</code>
    
  <li>Property names obey the rules of JS variables. (Though you can have
    other names using a different syntax; we won't do this.)
    
</ul>


<h2>Quiz Nr. 1</h2>

<p>Suppose we want to define an object to represent Ron. Which is
correct:
  
<ol type="A">
  <li><pre class="prettyprint lang-js">ron = {age: 17, hair color: red};</pre></li>
  <li><pre class="prettyprint lang-js">var ron = [age: 17, hair_color: red];</pre></li>
  <li><pre class="prettyprint lang-js">var ron = { age: 17; hair_color: "red"};</pre></li>
  <li><pre class="prettyprint lang-js">var ron = { age: 17, hair_color: "red"};</pre></li>
</ol>

<h2>Quiz Nr. 2</h2>

<p>What's the syntax error in the following object creation?
  
<pre class="prettyprint lang-js">var ron = { age: 17, hair color: red };</pre>

<ol type="A">
  <li><p>red should be in quotation marks</p></li>
  <li><p>uses <code>var</code> when it shouldn't</p></li>
  <li><p>commas between pairs should be a semi-colon</p></li>
  <li><p>invalid property name</p></li>
</ol>

<h2>Quiz Nr. 3</h2>

<p>Suppose we want change his age to 18. Which is correct:
  
<ol type="A">
  <li><pre class="prettyprint lang-js">ron.age = 18;</pre></li>
  <li><pre class="prettyprint lang-js">ron[age] = 18;</pre></li>
  <li><pre class="prettyprint lang-js">ron.age++;</pre></li>
  <li><pre class="prettyprint lang-js">ron.setAge(18);</pre></li>
</ol>

<h2>Animations</h2>

<p>jQuery animations are easy to do, but very limited. The syntax:

<pre class="prettyprint lang-js">
$(sel).animate(js_object, duration);
</pre>

<p>Some details:
  <ul>
    
    <li>The duration is in milliseconds.  So, supplying 1000 means the
    animation will take place over <em>one second</em>.  1500 is one and a
    half seconds, while 500 is half a second.  The larger the number,
    the <em>slower</em> the animation, which is sometimes surprising at
    first.
      
    <li>The duration is actually optional; the default value is 400
    milliseconds.

    <li>The CSS properties have to be <em>single numbers</em>, so that
    they can be smoothly changed over time.  For example,
    the <em>width</em> of an element can easily be changed gradually over
    time.  That is, if the current width is 0px and the target is 500px
    and the duration is 500 milliseconds, then every 50 milliseconds, the
    width might go up by 50 pixels:
      <blockquote>
        50, 100, 150, 200, 250, 300, 350, 400, 450, 500
      </blockquote>

    <li>Because the CSS properties have to be single numbers, you can't
    animate discrete changes like changing from "font-family:Times" to
    font-family:Verdana" For that reason, you can't change colors using
    animation (unless you load
    the <a href="https://github.com/jquery/jquery-color/">jQuery.Color()</a>
    plugin).

    <li>The set of CSS properties is given using a JavaScript object,
      typically using the object literal notation, though if we happen to
      have a variable that contains a set of CSS property-value pairs, we
      could use it.
  </ul>
  

<h2>jQuery Effects Examples</h2>

<p>A lot of cool effects can be built on top of the basic animation
  idea. jQuery has methods to have something (an element on the page)
  <code>fadeOut</code>, <code>fadeIn</code>, <code>slideUp</code>, <code>slideDown</code>,
  and much more.

<p>Here's a page that <a href="jqueryEffects-ex.html">demonstrates some
    jQuery effects</a>. None of these require more than a line of code.

<p>Note that you can combine these with other techniques we've
  learned. For example, you can have a drop-down
  menu <code>slideDown</code> or you can have a gallery
  image <code>fadeIn</code>.  Your madlib could have the
  story <code>slideDown</code>. Be creative!

<h2>Exercise: Writing a Animation</h2>

<p>As you know, we can even chain several animations together.  In the
  example below, we have an animation that enlarges this box and thickens
  the border.

<div style="width: 100%; height:110px">
  <div id="box1" style="border: 2px solid green">#box1</div>
</div>  

<form action="">
<div>
<textarea rows=10>
var large = {width: "500px", height: "100px", "border-width": "4px"};
var small = {width: "0px", height: "50px", "border-width": "2px"};
$("#box1")
    .css(small)          // instantly to this state
    .animate(large,1500);
</textarea><br>
<input type=button value="Execute It" 
       onclick="eval(this.parentNode.firstElementChild.value)">
</div>
</form>

<p>Write some jQuery animation code to animate the box shrinking back to its
  original state, but twice as fast as the enlargement.

<p>Your solution might look like this:

<div class="hidden_from_student">
  <pre id="act1_src" class="prettyprint lang-js linenums executable">
var large = {width: "500px", height: "100px", "border-width": "4px"};
var small = {width: "0px", height: "50px", "border-width": "2px"};
$("#box1")
    .css(small)          // instantly to this state
    .animate(large,1500)
    .animate(small,750);
  </pre>
<p>Did you think of using the JS variable that holds the initial state
object?

</div>

<h2>Animations as Click Handlers</h2>

<p>When you ask jQuery to modify a set of things, it will modify each one
in the set.  This makes it really easy to add the same function as an
event handler to lots of different elements, just by using a CSS selector
that matches more than one thing.  In the following example, we have three
boxes, all with the class <code>alice</code>, and we want them to grow by
50px each time you click on them.  Try it!  (I wanted to
use <code>AliceBlue</code> as the background color, but it's too pale.)

  <div style="border: 2px solid blue; padding: 2ex">
    <div class="alice">I'm Alice 1</div>
    <div class="alice">I'm Alice 2</div>
    <div class="alice">I'm Alice 3</div>
  </div>
    
<style scoped>
  .alice {
      background-color: LightBlue;
      width: 100px;
      margin: 3px;
  }
</style>  

<p>The jQuery code to do that is here. Note the use of <code>this</code>
  to grow only the element that was clicked on, not all three Alices.
  
<pre id="alice-pre" class="prettyprint lang-js"></pre>

<script id="alice-script">
function growElt() {
      var w = 50 + parseInt($(this).css('width'));
      $(this).animate({'width': w+"px"});
}    

$(".alice").click(growElt);
</script>

<script>
document.getElementById('alice-pre').textContent = document.getElementById('alice-script').innerHTML;
</script>

<h2>Applying Handlers to Multiple Elements</h2>

<p>Here we have a list of Hagrid's Horribles. It's a simple ordered
  list (OL), and the ID is <code>hagrids</code>.

<ol id="hagrids">
  <li>Fluffy</li>
  <li>Norbert</li>
  <li>Aragog</li>
  <li>Buckbeak</li>
  <li>Blast-ended Skrewts</li>
</ol>

<p>Define a function named <code>engorgio</code> that increases the font
  size of an element by 10px. Attach that function as an event handler for
  click events to all the elements of the list, and then try it
  out. Clicking on one item in the list should increase by 10px the
  font size of <em>that</em> element only, and none of the others.

<p>(It might be less frightening to define <code>reductio</code>, but
harder to see.)

<form action="">
<div>
<textarea rows=10>

</textarea><br>
<input type=button value="Execute It" 
       onclick="eval(this.parentNode.firstElementChild.value)">
</div>
</form>

<p>Your solution might look like this:

<div class="hidden_from_student">
  <pre id="act2_src" class="prettyprint lang-js linenums executable">
function engorgio() {
    var bigger = 10 + parseInt($(this).css("font-size"));
    $(this).animate({"font-size": bigger+"px"});
}

$("#hagrids li").click(engorgio);
  </pre>
</div>


<h2>Slideshows</h2>

<p>Below is a variation on the final sliding slideshow we saw in the
  reading.  Jump down and look at it, and then come back and read through
  the code.

<h3>Slideshow HTML</h3>

<p>Here's the HTML.  Pretty simple, so far. We added a couple of buttons.

<pre id="slides4-pre-html" class="prettyprint linenums lang-html"></pre>

<h3>Slideshow CSS</h3>

<p>Here's the CSS. This is pretty tricky!

<pre id="slides4-pre-css" class="prettyprint linenums lang-css"></pre>

<h3>Slideshow JS</h3>

<p>Here's the JS. Tricky, but not very tricky.

<pre id="slides4-pre-js" class="prettyprint linenums lang-js"></pre>

<p>We made a few small changes from the reading:
  <ul>
    <li>We packaged up the code into nice neat functions.
    <li>We added one of the functions as an event handler for one of the
      buttons.
  </ul>

<p>Here it is in action:

<div id="slides4-html">
<figure id="slides4">
  <button id="nextSlideButton">next slide</button>
  <button id="prevSlideButton">prev slide</button>
  <ul>
    <li><img src="../../reading/potterpics/harry-potter-256.jpeg" alt="Harry Potter"></li>
    <li><img src="../../reading/potterpics/ron-weasley-256.jpeg" alt="Ron Weasley"></li>
    <li><img src="../../reading/potterpics/hermione-granger-256.jpeg" alt="Hermione Granger"></li>
    <li><img src="../../reading/potterpics/draco-malfoy-256.jpeg" alt="Draco Malfoy"></li>
  </ul>
</figure>
</div>


<style id="carousel4-css" scoped>
  #slides4 {
      width: 256px;
      height: auto;
      overflow: hidden;
  }

  #slides4 ul {
      width: 1024px;
      height: 192px;
      list-style: none;
      position: relative;
      margin: 0px;
      padding: 0px;
  }

  #slides4 li {
      float: left;
  }
</style>

<script id="slides4-script">
var currentSlideIndex = 0;   // global

function displaySlide() {
    var target = -256 * currentSlideIndex;    
    $("#slides4 ul").animate({left: target+"px"}, 800);
}

function nextSlide() {
    currentSlideIndex ++;
    if( currentSlideIndex >= $("#slides4 li").length ) {
        currentSlideIndex = 0;
   }
   displaySlide();
}

$("#nextSlideButton").click(nextSlide);
</script>

<script>
document.getElementById('slides4-pre-html').textContent = document.getElementById('slides4-html').innerHTML;
document.getElementById('slides4-pre-css').textContent = document.getElementById('carousel4-css').innerHTML;
document.getElementById('slides4-pre-js').textContent = document.getElementById('slides4-script').innerHTML;
</script>
  

<h2>Exercise: Previous Slide</h2>

<p>Write some JS code to implement the previous slide button. Try it out here:

<form action="">
<div>
<textarea rows=7></textarea><br>
<input type=button value="Execute It" 
       onclick="eval(this.parentNode.firstElementChild.value)">
</div>
</form>


<p>Your solution might look like this:

<div class="hidden_from_student">
  <pre id="act3_src" class="prettyprint lang-js linenums executable">
function prevSlide() {
    currentSlideIndex--;
    if( currentSlideIndex < 0 ) {
        currentSlideIndex = $("#slides4 li").length - 1;
    }                            
    displaySlide();
}

$("#prevSlideButton").click(prevSlide);
  </pre>
</div>





<!-- some nice examples of animation callbacks in here:

http://cs.wellesley.edu/~cs110f13/lectures/Animation/animation.shtml

-->

<h2>Summary</h2>

<p>We hope that after these activities you have a good understanding of:
  <ul>

    <li>JS object literals and how to use them.
    <li>Sliding Carousels and how to set them up.
  </ul>

<h2 id="sec_solutions">Solutions</h2>
  
<p id="solutions_later">Will be posted later, visit again after
  <span id="later"></span>.</p>

<div id="solutions">

<p>Quiz answers:
<pre>
1. D
2. D definitely but A might also be true
3. A definitely but C might also be true, if Ron is 17. B is *almost*
correct, but <code>age</code> would be a variable, not a 
</pre>


</div>

<!--#include virtual="/~cs110/modularity/footer-rel.part" -->
    
</div> <!--end of container>
        
<!--#include virtual="/~cs110/modularity/bs-footer-rel.part" -->
<script src="../../js/date-functions.js"></script>
<script>
  revealLater("04/8/2016 1:00 PM"); 
</script>

</body>
</html>
