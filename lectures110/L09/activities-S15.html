<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">        
    <title>Lecture 9:  Class Activities</title>
        
    <!--#include virtual="/~cs110/modularity/bs-head.part" -->
  <script src="http://google-code-prettify.googlecode.com/svn/loader/prettify.js"></script>
  <link rel="stylesheet" href="../../css/prettify.css">
    <style>
      #TOC_list {list-style-type: none;}
      td { width: 3em; }

      form {
         border: 2px solid #2e9ad3;
         padding: 10px 2em;
      }

    </style>
  </head>
    
  <body>
    <!--#include virtual="/~cs110/modularity/navbar.part" -->
    
    <div class="container">
      <h1>Lecture 9 &nbsp; <small>Class Activities for Forms, Functions
      and Events</small></h1>
    </div>
        
    <div class="container">
      <div class="row">
            
        <!-- Three columns of the grid are reserved for the sidebar-->
        <div class="col-md-3">         
          <div class="bs-sidebar hidden-print" role="complementary">
            <ul id="insert_TOC_here" class="nav bs-sidenav">  
            </ul>
          </div>

        </div><!--end of "col-md-3" div-->
        
        <!-- Nine columns of the grid are reserved for the main content-->
        <div class="col-md-9">
         <div class="alert alert-warning">
           <ul>
             <li>Assumptions about how this course works
             <li>Google is your friend.
             <li>Exam next week
             <li>SI sessions and review
             <li>no calculators on the exam; expressions okay for some answers
           </ul>
         </div>
          
         <h2>Variables</h2>

         <p>One of the important features of almost all programming
         languages is the ability to store a value so that it can be used
         later. These are called <em>variables</em>.

         <p>There are rules for how they can be created and named. Here
         are the rules for JavaScript:
           
           <ul>
             <li>Create them with <code>var</code>.  JavaScript allows
             this to be optional, but you should not.
               
             <li>The name should start with a letter, contain letters,
             numbers, and maybe underscores, but nothing <q>weird</q>
             and <em>no spaces</em>.
               
             <li>The name can't be a <q>special</q> part of the language,
             such as <code>var</code>, or <code>function</code>
             or <code>if</code>, etc.  These are <em>reserved</em>.
           </ul>

         <p>Make your variable names <em>intuitive</em>:  they should
         remind you of the stuff stored in them, so <code>user_age</code>
         is good, but <code>n</code> or <code>stuff</code> is not.

<h2>Quiz Question Nr. 1</h2>  

<p>What does the following statement do?
 
<pre class="prettyprint lang-js">
x = y;
</pre>

<ol type="A">
<li><p> It gets an error</p></li>
<li><p> It tests whether the two variables are equal</p></li>
<li><p> It copies the value of <code>y</code> into <code>x</code></p></li>
<li><p> It copies the value of <code>x</code> into <code>y</code></p></li>
</ol>

<h2>Getting Data</h2>

<p>In this course, variables will almost always get their values from
  <ol>
    <li>other variables and expressions
      
    <li>a user input function (mostly for testing)
      
    <li>a form
  </ol>

<h2>Quiz Question Nr. 2</h2>  

<p>We want some code that will ask the user their name and greet
  them. Which of the following does that?
 
<ol type="A">
<li><pre class="prettyprint lang-js">
var user = alert("what's your name?");
prompt("Greetings, "+user);
</pre>

<li><pre class="prettyprint lang-js">
var user = prompt("what's your name?");
alert("Greetings, "+user);
</pre>

<li><pre class="prettyprint lang-js">
var user = prompt("what's your name?");
var greet = "Greetings, "+user;
alert(greet);
</pre>

<li><pre class="prettyprint lang-js">
var user = alert("what's your name?");
var greet = "Greetings, "+user;
prompt(greet);
</pre>

</ol>

<p>There's a pattern to that kind of code:
  <ol>
    <li>Get some input
      
    <li>process it, deriving some result
      
    <li>report the result
  </ol>

<p>Not all of our code will show that pattern, but it often will, so it's
  worth stepping back to see the pattern.

<h2>Forms and the DOM</h2>

<p>Forms allow the user to supply the information we want on their
  schedule, skipping around and ignoring inputs. That's much better than a
  series of prompts.

<p>We can access anything in the document from JavaScript using the
  Document Object Model or <em>DOM</em>. The DOM is just a collection of
  stuff added to the JS language that lets us poke around in the document,
  finding the parents and children of nodes, and even modifying the
  document.

<p>We can also find out dynamic info like the value of an input in a form.

<p>Here's an example form:

<pre>
  &lt;form&gt;
    &lt;p&gt; height in feet
      &lt;input type="number" id="height_feet" name="height_feet"&gt; and 
      &lt;input type="number" id="height_inches" name="height_inches"&gt;.
    &lt;p&gt; &lt;button type="button" id="convert_button"&gt;convert to metric&lt;/button&gt;
    &lt;p&gt; &lt;button type="button" id="student_button"&gt;student button&lt;/button&gt;
  &lt;/form&gt;
</pre>

  <form>
    <p> height in feet
      <input type="number" id="height_feet"  name="height_feet"> and 
      <input type="number" id="height_inches" name="height_inches">.
    <p> <button type="button" id="convert_button">convert to metric</button>
    <p> <button type="button" id="student_button">student button</button>
  </form>

<p>You're welcome to click the first button and see how the form works.
  Later today, you'll define the behavior for the second button.

<h2>Exercise 1</h2>

<p>With a partner, do the following.  I expect this exercise to take a
  while, maybe 20 minutes or more, so don't feel you have to rush. 
  <ol>
    <li>Write some JS/JQ code to extract the values of the two form
    inputs. You should test this in the JS console, by filling out the
    form and seeing those values in the console.
      
    <li>Store the two values in variables.

    <li>Make sure the values are <em>numbers</em> and not <em>strings</em>
      
    <li>Compute the total number of inches.  That should probably be
    another variable.

    <li>Report the result in some way, such as <code>alert</code>
    or <code>console.log</code>.
      
    <li>Compute the number of centimeters.  That should probably be yet
    another variable.
      
    <li>Report the value.

    <li>Compute the number of meters, in one last variable.
      
    <li>Report this last value.

  </ol>

<h2>Quiz Question Nr. 3</h2>  

<p>Did you get it to work?  How far did you get?
  
<ol type="A">
<li><p> Got stuck on step 1</p></li>
<li><p> Got stuck on step 2</p></li>
<li><p> Got stuck on step 3</p></li>
<li><p> Got stuck on step 4 or 5</p></li>
<li><p> Got stuck on step 6 -- 9</p></li>
<li><p> Complete success!!</p></li>
</ol>

<h2>Functions</h2>

<p>A function allows us to package up a chunk of code and give it a name.
  We can <em>run</em> that code <em>later</em> by <em>invoking</em>
  (or <em>calling</em>) the function.

<p>We define a function like this:

  <pre class="prettyprint lang-js">
    function name_of_function () {
        // body of function
    }

    function yo () {
        console.log("Hey there!");
    }
  </pre>

<p>We <em>invoke</em> a function using its name and parens:

  <pre class="prettyprint lang-js">
    yo();
  </pre>

  <h2>Exercise 2</h2>

<p>Using the JS console, trying invoking <code>yo</code>.  Try defining a
  different function called <code>greet</code> that packages up the code
  from question Nr. 2.


<h2>Function to Convert Pounds </h2>

<p>The code of a function can be (pretty much) any JS code, so it can get
  values from a form. Here's an example:

  <form>
    <p>Enter a weight in pounds:
      <input type="number" id="weight_lbs" name="weight">
      <button type="button" id="convert_button2">convert to metric</button>
  </form>

  <pre class="prettyprint lang-html">
  &lt;form&gt;
    &lt;p&gt;Enter a weight in pounds:
      &lt;input type="number" id="weight_lbs" name="weight"&gt;
      &lt;button type="button" id="convert_button2"&gt;convert to metric&lt;/button&gt;
  &lt;/form&gt;
  </pre>

  <pre class="prettyprint lang-js">
    function convertPounds () {
       var lbs = parseInt($("#weight_lbs").val());
       var kg = lbs / 2.2;
       alert("In kilos, that is "+kg);
    }
  </pre>

  <h2>Exercise 3</h2>

  <p>Using the JS console, fill out the <q>pounds</q> form and then
  invoke <code>convertPounds</code>.

  <p>Then, return to your code from exercise 1 and package it up into a
  function. Fill out the form and invoke the function.

    <h2>Event Handlers</h2>

    <p>Another cool thing about functions is that they can
    be <em>attached</em> to an element in the document, and then the
    browser can <em>invoke</em> them when an <em>event</em> occurs
    involving that element.  This makes the function an <em>event
    handler</em>.

    <p>We can attach a function to an element using
    jQuery's <code>.click()</code> method. That makes the function
    an <em>event handler</em> for events involving the user clicking on
    that element.

    <p>Here's an example. 

  <form>
    <p>weight in kilos:
      <input type="number" id="weight_kg" name="weight_kg">
      height in meters:
      <input type="number" id="height_meters" name="height_meters">
      <button type="button" id="bmi_button">compute BMI</button>
  </form>

  <p>Here's the HTML:
    <pre class="prettyprint lang-html">
  &lt;form&gt;
    &lt;p&gt;weight in kilos:
      &lt;input type="number" id="weight_kg" name="weight_kg"&gt;
      height in meters:
      &lt;input type="number" id="height_meters" name="height_meters"&gt;
      &lt;button type="button" id="bmi_button"&gt;compute BMI&lt;/button&gt;
  &lt;/form&gt;
</pre>

  <p>Let's define a function to compute the BMI. Note the use of
  <code>parseFloat</code> instead of <code>parseInt</code>, to allow
  people to enter a height of, say, 1.7 meters.  We could also allow
  people to enter their weight using floating point as well, but forcing
  them to round off to the nearest kilo isn't so bad.

  <pre class="prettyprint lang-js">
    function compute_BMI () {
       var weight = parseInt($("#weight_kg").val());
       var height = parseFloat($("#height_meters").val());
       var bmi = weight/(height*height)
       alert("The BMI is "+bmi);
    }
  </pre>

  <p>Let's attach that function to the button:

  <pre class="prettyprint lang-js">
    $("#bmi_button").click(compute_BMI);
  </pre>

  <h2>Exercise 4</h2>

  <p>Return to your code from exercise 3 and attach the function to the
  <code>student_button</code>.

  <h2>Modularity</h2>

  <p>The conversion functions we defined today are closely tied to the
  forms that provide the input.  That's okay, but there's a better way.
    
  <p>Later in the course, we'll learn how to define generic functions that
  do, for example, metric conversions for us, on any data. We'll then be
  able to use those generic functions to create, say, a form that computes
  BMI using archaic units, without copy/pasting the conversion code.  

    <!--#include virtual="/~cs110/modularity/footer.part" -->
    
    <h2 id="solutions">Solutions</H2>

    <div id="solution_code">
      <p>Quiz question #1 is C.

      <p>Quiz question #2 is B or C.

      <p>For exercise 1:

      <pre class="prettyprint lang-js">
          var feet = parseInt($("[name=height_feet]").val());
          var inches = parseInt($("[name=height_inches]").val());
          var total_inches = 12*feet+inches;
          alert("total inches:" + total_inches);
          var cm = 2.54 * total_inches;
          alert("cm:" + cm);
          var meters = cm/100;
          alert("meters:" + meters.toFixed(2));
      </pre>

      <p>Quiz question #3 is F.

      <p>For exercise 2:
      <pre class="prettyprint lang-js">
	function greet() {
	  var user = prompt("what's your name?");
          alert("Greetings, "+user);
        }
      </pre>

      <p>For exercise 3:

      <pre class="prettyprint lang-js">
      function convertHeight () {
          var feet = parseInt($("[name=height_feet]").val());
          var inches = parseInt($("[name=height_inches]").val());
          var total_inches = 12*feet+inches;
          alert("total inches:" + total_inches);
          var cm = 2.54 * total_inches;
          alert("cm:" + cm);
          var meters = cm/100;
          alert("meters:" + meters.toFixed(2));
      }
      </pre>
      
      <p>For exercise 4:
      <pre class="prettyprint lang-js">
         $("#student_button").click(convertHeight);
      </pre>	  

    </div>


    </div> <!--end of container>
        
        
    <!--#include virtual="/~cs110/modularity/bs-footer.part" -->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="../../js/TOC.js"></script>
    <script src="/~cs307/js/google-code-prettify/prettify.js"></script>
    <script>
      
      /* This effect allows you to click on an answer that has been "ruled
      out" for some reason. It will fade out. */
      function hideAnswer() {
          $("pre",this)
              .css('border-color','red')
              .css('background-color','#FF8080')
              .fadeOut(1000);
          $("p",this)
              .css('border-color','red')
              .css('background-color','#FF8080')
              .fadeOut(1000);
      }

      $("li").click(hideAnswer);
    </script>

    <script>
      function convertHeight () {
          var feet = parseInt($("[name=height_feet]").val());
          var inches = parseInt($("[name=height_inches]").val());
          var total_inches = 12*feet+inches;
          alert("total inches:" + total_inches);
          var cm = 2.54 * total_inches;
          alert("cm:" + cm);
          var meters = cm/100;
          alert("meters:" + meters.toFixed(2));
      }
      
    function yo () {
        console.log("Hey there!");
    }

    function convertPounds () {
       var lbs = parseInt($("#weight_lbs").val());
       var kg = lbs / 2.2;
       alert("In kilos, that is "+kg);
    }

    function compute_BMI () {
       var weight = parseInt($("#weight_kg").val());
       var height = parseFloat($("#height_meters").val());
       var bmi = weight/(height*height)
       alert("The BMI is "+bmi);
    }

      $("#convert_button").click(convertHeight);
      $("#convert_button2").click(convertPounds);
      $("#bmi_button").click(compute_BMI);

      $("#solution_code").hide();
      if( (new Date()) > (new Date("3/1/2015")) ) {
          $("#solution_code").show();
      }
    </script>
    <script>insertTOC_textual(); prettyPrint();</script>

  </body>
</html>
