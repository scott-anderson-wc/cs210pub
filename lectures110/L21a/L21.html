<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class Activities</title>
    <!-- use relative pathnames in #include so when this site is archived,
         say as cs110f15, the include refers to the same file -->
    <!--#set var="reltop" value="../../" -->
    <!--#include virtual="../../modularity/bs-head-rel.part" -->
    <style>
      #TOC_list {list-style-type: none;}
    </style>
    
  </head>
  <body>
    <!--#include virtual="../../modularity/navbar-rel.part" -->

    <div class="container">
      <h1>Review</h1>
      <hr>
    </div>
      
    <div class="container">
      <div class="row">
     
        <div class="col-md-3">
          <div class="bs-sidebar hidden-print" role="complementary">
            <ul class="nav bs-sidenav">  
              <div id="insert_TOC_here"></div>
            </ul>
          </div>
        </div>

        <div class="col-md-8">
          
<h2>Goal</h2>

  <ol>
    <li>Look at information flow in functions that take arguments and
      return values.
      
    <li>Revisit the example of a form that has sliders and event handlers.
            
    <li>Review drop-down menus.
      
    <li>Repeat the Ajax form submission to a custom PHP script.
      
    <li>Walk through the solution to hw8.

  </ol>

<h2>Functions, Parameters, Arguments and Return Values</h2>

<p>Using parameters, we can make functions that are more powerful and general.

    <ul>

      <li>They can handle a  broader set of situations by
        taking <em>arguments</em>.  A function that operates on an element
        with ID <code>fred</code> has limited usefulness.  A function that
        operates on an element whose ID is an <em>argument</em>
        is <em>much</em> more useful.
        
      <li>Inside the function definition, the name given to an argument is
        <em>parameter</em> (but we won't be pedantic about this).
        
      <li>Parameters only <em>exist</em> inside the function. They don't
        exist outside it.  They live and die during one function
        execution. This is a good thing.
        
      <li>Local variables of a function should be declared
        with <code>var</code>. This makes them like parameters, in the
        sense that they exist only inside the function and only when the
        function is executing.
        
      <li>Functions can also return values to their caller. Think of this
        as the answer to a question that the caller has asked.  This is a
        good thing.

      <li>When a function returns a value, the caller should almost always
        <em>use</em> it or <em>store</em> it (and use it later). 

    </ul>

<h2>Example: Hypotenuse Calculation</h2>

<p>You probably remember the Pythagorean theorem, which states that, for a
  triangle like this,

  <figure style="text-align:center">
    <img src="right-triangle-345.png" alt="right triangle with side a, b,
  and c">
    <figcaption>Right triangle with side a, b, and c</figcaption>
  </figure>
  
  <blockquote><p>the square of the hypotenuse of a right triangle is equal
  to the sum of the squares of the other two sides. Or
    <p style="text-align: center">c<sup>2</sup> = a<sup>2</sup> + b<sup>2</sup>
</blockquote>

<p>We can use JavaScript to define a <em>function</em> that
  will <em>return</em> the hypotenuse of a right triangle. But first,
  we're going to define a <em>helper</em> function. This function could be
  useful in its own right.

<h2>Exercise: the square function</h2>

<p>Define a function named <code>square</code> that takes one argument, a
number, and returns the square of that number.

<p>(Yes, this function's body will be very easy; pretend it's difficult.
The point of this exercise is to define functions that take arguments and
return values, and to test them using the JS console. We could come up
with an example that has a much more difficult implementation, but that's
not the point.)

<p>You can using the following execution box to draft your solution. Once
you have it, copy/paste the function definition into the JS console and
invoke it with a few values to test it.

<form action="">
<div>
<textarea rows=5>

</textarea><br>
<input type=button value="Execute It" 
       onclick="eval(this.parentNode.firstElementChild.value)">
</div>
</form>

<p>Your solution might look like this:

<div class="hidden_from_student">
  <pre id="act1_src" class="prettyprint lang-js linenums executable">
function square(x) {
    return x * x;
}   

var ans = square(3);
alert( "3 squared is " + ans);
alert( "5 squared is " + square(5));
  </pre>
</div>

<p>Note that
  <ul>
    <li>The function doesn't do <code>prompt()</code> or anything to go
    get the value. The value is just given to it, as an argument.
      
    <li>The function doesn't report the answer to the user,
    using <code>alert()</code> or anything like that. It doesn't use
    jQuery or the DOM to insert the value onto the page. In fact, the user
    might not even know this function exists!
      
  </ul>

<p>The function you implemented is the inverse of a function
called <code>Math.sqrt</code>. You can test in the JS console that the
following hold:

<pre class="prettyprint lang-js">
4 == Math.sqrt( square( 4 ) );
5 == Math.sqrt( square( -5 ) );  // an inefficient way to do absolute value
9 == square(Math.sqrt(9));
</pre>

<h2>Exercise: the hypotenuse function</h2>

<p>Now, define a function named <code>hypotenuse</code> that will compute
the hypotenuse of a right triangle. It will take two inputs (arguments),
both numbers. They are the lengths of the <em>legs</em> of the
triangle. The function will <em>return</em> the hypotenuse. The
function <em>must</em> use the <code>square</code> function we just
defined.  It should also use the <code>Math.sqrt</code> function that we
just learned about.

<p>If you're finding this too easy, try doing it twice, once with as many
local variables as possible, and once with as few as possible.  Which do
you prefer?

<p>As before, draft your solution here, and copy/paste the code into the
JS console to test it there.  I've given you the code for
the <code>square</code> function. 
<form action="">
<div>
<textarea rows="15">
function square(x) {
    return x * x;
}   



</textarea><br>
<input type=button value="Execute It" 
       onclick="eval(this.parentNode.firstElementChild.value)">
</div>
</form>

<p>Your solution might look like this:

<div class="hidden_from_student">
  <pre id="act2_src" class="prettyprint lang-js linenums executable">
function square(x) {
    return x * x;
}   

function hypotenuse(a,b) {
    var a2 = square(a);
    var b2 = square(b);
    var c2 = a2+b2;
    var c = Math.sqrt(c2);
    return c;
}

var ans = hypotenuse(3,4);
alert( "hypotenuse of 3 and 4 is " + ans);
  </pre>
</div>

<p>Or, maybe it looks like this:

<div class="hidden_from_student">
  <pre id="act3_src" class="prettyprint lang-js linenums executable">
function square(x) {
    return x * x;
}   

function hypotenuse(a,b) {
    return Math.sqrt( square(a) + square(b) );
}

var ans = hypotenuse(5,12);
alert( "hypotenuse of 5 and 12 is " + ans);
  </pre>
</div>

<p>Some observations:

  <ul>
    <li>The <code>square</code> function is always invoked with an
    argument. The variable we send doesn't have to have the same name as
    the parameter.  (That is, <code>a</code> and <code>b</code> aren't the
    same as <code>x</code>).

    <li>Because the <code>square</code> function returns a value, that
    value is always either used or stored and then used.
      
    <li>Like <code>square</code>, the <code>hypotenuse</code> function
      doesn't use <code>prompt</code> or <code>alert</code>. It gets its
      input from the arguments, and returns its answer. So it has to be
      used just like <code>square</code> is.
  </ul>

<h2>Revisiting hexDigit, hexByte, hexColor and the Sliders</h2>

<p>We'll spend some time redoing some earlier examples of functions that
  take arguments and returns values, starting with
  the <a href="../L16/L16.html#hexByte">hexByte</a> function.  

<h2>Drop-Downs Review</h2>

<p>A student asked for a recap of drop-downs.
  
<ul>
  <li>Drop-down menus have a click behavior that is a <em>toggle</em>:
  click once on the header, and the menu appears. Click again, and it
  disappears.
    
  <li>The event handler function doesn't have any memory; it doesn't know
  whether it's a <q>first</q> click or a <q>second</q> click.
    
  <li>It can, however, figure out whether the menu is showing. If it's
  showing, hide it. If it's hidden, show it.
    
  <li>It can figure out whether the menu is showing by looking at the
    value of the <code>display</code> property. If
    it's <code>display:none</code>, the menu is hidden.
</ul>

<h2>Drop-Downs Implementation</h2>

<p>Our drop-downs will use a click to open/close the menu, unlike
  the <q>rollover</q> menus that have been common for many years. Our
  reasoning is that menus that use clicking will be more mobile-friendly.

<p>Here are several drop-down menus, arranged horizontally.

<div id="dropdown1">
<ul id="header">
  <li class="topmenu">Things
    <ul class="submenu" id="menu1">
      <li>raindrops on roses</li>
      <li>whiskers on kittens</li>
      <li>bright copper kettles</li>
      <li>warm woolen mittens</li>
    </ul>
  </li>
  <li class="topmenu">Movies
    <ul class="submenu"  id="menu2">
      <li>Dr. Zhivago</li>
      <li>The Graduate</li>
      <li>Lord of the Rings</li>
      <li>Frozen</li>
    </ul>
  </li>
  <li class="topmenu">Musicals
    <ul class="submenu"  id="menu3">
      <li>Phantom of the Opera</li>
      <li>Les Miserables</li>
      <li>Into the Woods</li>
      <li>Sweeney Todd</li>
    </ul>
  </li>

</ul>
</div>

<style id="dd1-style1" scoped>
  .topmenu {
     display: inline-block;
     width: 30%;
     position: relative;
  }

  .submenu {
     position: absolute;
     left: auto;
     top: auto;
  }
</style>


<style id="dd1-style2" scoped>
  #dropdown1 {
      height: 9em;
  }

  #header {
     background-color: mistyrose;
  }

  .topmenu {
     font-weight: bold;
     font-size: larger;
     color: firebrick;
     text-align: center;
     border: 1px solid mistyrose;
  }

  .topmenu:hover {
     border-color: firebrick;
  }

  .submenu {
     list-style-type: none;
     background-color: #faea8c;
     padding: 0px;
  }

  .submenu li {
     border: 1px solid red;
  }

  .submenu li:hover {
     color: #faea8c;
     background-color: firebrick;
  }
</style>




<script id="dd1-script">
function toggleMenu(menu) {
    var id = menu.attr("id");  // just for debugging
    var curr = menu.css("display");
    console.log("menu "+id+"'s display property is "+curr);
    if( curr == "none" ) {
        menu.show();
    } else {
        menu.hide();
    }
}

function toggleSubmenu() {
    var submenu = $(this).find("ul");
    toggleMenu(submenu);
}

$(".submenu").hide(); // save this for last!

$(".topmenu").click(toggleSubmenu); // adds that function to three LI elements
</script>

<p>Most of the difficulty with drop-downs is getting the CSS right. Let's
  first look at the HTML for the example above:

<pre id="dd1-html" class="prettyprint lang-html"></pre>  

<p>Now, that tricky CSS:

<pre id="dd1-css1" class="prettyprint lang-css linenums"></pre>

<p>Finally, the JS:

<pre id="dd1-js" class="prettyprint lang-js linenums"></pre>

<p>Note, that we added a bit more CSS just to make it prettier:

<pre id="dd1-css2" class="prettyprint lang-css linenums"></pre>
  
<script>
document.getElementById("dd1-html").innerText = document.getElementById("dropdown1").innerHTML;

document.getElementById("dd1-css1").innerHTML = document.getElementById("dd1-style1").innerHTML;
document.getElementById("dd1-css2").innerHTML = document.getElementById("dd1-style2").innerHTML;

document.getElementById("dd1-js").innerText = document.getElementById("dd1-script").innerHTML;
</script>

<p>Here's <a href="dropdown1.html">the same drop-down menu, in a separate file</a>
<p>Here's <a href="dropdown2.html">the same drop-down menu, but without the second chunk of CSS</a>


<h2 id="Ajax">Ajax</h2>

<p>A student asked to try the Ajax email example again.  You can try the
  following, substituting the URL of your personalized PHP script, based
  on <a href="../L21/activities.html#generating-a-PHP-script">generating a
  PHP script</a>.

  <form action="">
<div>
<textarea rows=16>
function responder(response) {
   alert(response.status);
}

function testAjaxEmail() {
    var url = "http://cs.wellesley.edu/~YOURACCT/mail-form/mailto_YOURACCT_at_wellesley_edu.php"; 
    var what = {from_name: "Me myself",
                from_email: "me@here.com",
                subject: "sent from the browser",
                body: "Hi me!"};
   $.post(url, what, responder, "json");
}

testAjaxEmail();
</textarea><br>
<input type=button value="Execute It" 
       onclick="eval(this.parentNode.firstElementChild.value)">
</div>
</form>

<script>
// test the above using the following URL
// var url = "http://cs.wellesley.edu/~cs110/php/mailto_scott_anderson_at_wellesley_edu.php"; 
</script>

<h2>hw8</h2>

<p>We'll have printouts of the solution to hw8 and we'll go over our solution.

<h2>Summary</h2>

<p>We hope that after these activities you have a better understanding of 
  <ul>

    <li>functions, parameters and arguments
    <li>event handlers
    <li>drop-downs
    <li>sending email using Ajax
    </ul>

<h2 id="sec_solutions">Solutions</h2>
  
<p id="solutions_later">Will be posted later, visit again after
  <span id="later"></span>.</p>

<div id="solutions">

<p>Quiz questions:
<pre>
</pre>

 </div>

    <!--#include virtual="/~cs110/modularity/footer-rel.part" -->
    
    </div> <!--end of container>
        
        
    <!--#include virtual="/~cs110/modularity/bs-footer-rel.part" -->
    <script src="../../js/date-functions.js"></script>
    <script>
      revealLater("11/16/2015 1:00 PM"); 
   </script>

  </body>
</html>
