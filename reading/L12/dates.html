<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="author" content="Scott D. Anderson and the CS110 Staff">
        
    <title>CS110: The Date() Object</title>
    <style>
    TH.exp, TD.exp {font-family: monotype; font-size:110%; color: green;}
    TH.val, TD.val {font-family: monotype; font-size:110%; color: blue;}
    TH.note, TD.note {font-family: Verdana, Arial, sans-serif; font-style: italic; color: black;}
    table {margin: 0 auto;}
  </style>    
    <!--#include virtual="/~cs110/modularity/bs-head.part" -->
  </head>
    
  <body>
    <!--#include virtual="/~cs110/modularity/navbar.part" -->
    
    <div class="container">
      <h1>The <code>Date</code> Object&nbsp; <small>Operations with date/time values</small></h1>
			<hr>
			<div class="alert alert-info">
			For supplemental reading, refer to pages 450-457
      of the recommended book <a href="http://shop.oreilly.com/product/0636920015048.do">Javascript & jQuery: 
				The Missing Manual.
			</div>
    </div>
        
    <div class="container">
      <div class="row">
            
         <!-- Three columns of the grid are reserved for the sidebar-->
        <div class="col-md-3">
          <div class="bs-sidebar hidden-print" role="complementary">
            <ul class="nav bs-sidenav">
              <li><a href="#date">Displaying Date</a></li>
              <li><a href="#date_formatting">Date Formatting</a></li>
							<li><a href="#more">More on Dates</a></li>
            </ul>  
          </div><!-- end of "bs-sidebar"-->
        </div><!--end of "col-md-3" div-->
					
					
	 <div class="col-md-8">	
				
   <h2 id="date">Displaying Date</h2>
      <p>We can display the current date and time on a web page. For example: 

<script type="text/JavaScript">
// get the date information
var today = new Date();

var the_day = today.getDate();
var the_month = today.getMonth() + 1; // because Jan is 0, Feb is 1, etc. 
var the_year = today.getFullYear();
var current_date = the_month + "/" + the_day + "/" + the_year;

var the_hour = today.getHours();
var the_minute = today.getMinutes();
var the_second = today.getSeconds();
var current_time = the_hour + ":" + the_minute + ":" + the_second;

document.write("<blockquote>In Wellesley, MA, the date is " 
                + current_date
                + " and the time is " 
                + current_time
                + ".<\/blockquote>");
</script>

<p>If you reload this page, you'll notice that the date and time change appropriately. 

<p>Before we explain the JavaScript code that can do this, 
   we need to understand how time is represented in JavaScript. 
   We begin by creating a <code>Date</code> object: 

<pre class="sh_javascript">
var now = new Date(); 
</pre>

<p> As we've seen before, the keyword <code class="sh_keyword">var</code>
in <code><span class="sh_keyword">var</span> now</code> creates a new
variable box named <code class="sh_keyword">now</code> for storing a
value.  What we haven't seen before is the keyword
<code class="sh_keyword">new</code>, which causes a
JavaScript <em>object</em> to be created.  In this case, the object
represents the current date and time.  JavaScript comes equipped with lots
of pre-defined object types like <code>Date</code>. Other examples are 
	<code>Number</code>, <code>Array</code>, or <code>Image</code>.
	<!--Stay tuned for a
<a href="#objects">description of objects</a-->

<p>We can extract information from a <code>Date</code> object by
invoking <em>methods</em> on it. The table below shows some of the
important methods that <code>Date</code> objects understand.  The elements
of the <b>Value</b> column are dynamically computed by evaluating the
JavaScript expressions in the
<b>Expression</b> column, so reloading the page will update
these appropriately. 

    <script type = "text/JavaScript">
    // Create a date object representing the current time. 
       var now = new Date(); 
    </script>

    <table border = "1">
      <tr>
        <TH class = "exp">Expression</TH>
        <TH class = "val">Value</TH>
        <TH class = "note">Notes</TH>
      </TR>
      <TR>
        <TD class = "exp">now.getFullYear()</TD>
        <TD class = "val">
          <SCRIPT TYPE = "text/JavaScript">
          document.write(now.getFullYear());
          </SCRIPT>
        </TD>
        <TD class = "note">Full year</TD>
      </TR>
      <TR>
        <TD class = "exp">now.getMonth()</TD>
        <TD class = "val">
          <SCRIPT TYPE = "text/JavaScript">
          document.write(now.getMonth());
          </SCRIPT>
        </TD>
        <TD class = "note">0=Jan, 1=Feb, ..., 11=Dec</TD>
      </TR>
      <TR>
        <TD class = "exp">now.getDate()</TD>
        <TD class = "val">
          <SCRIPT TYPE = "text/JavaScript">
          document.write(now.getDate());
          </SCRIPT>
        </TD>
        <TD class = "note">1 to 31</TD>
      </TR>
      <TR>
        <TD class = "exp">now.getDay()</TD>
        <TD class = "val">
          <SCRIPT TYPE = "text/JavaScript">
          document.write(now.getDay());
          </SCRIPT>
        </TD>
        <TD class = "note">0=Sun, 1=Mon, ..., 6=Sat</TD>
      </TR>
      <TR>
        <TD class = "exp">now.getHours()</TD>
        <TD class = "val">
          <SCRIPT TYPE = "text/JavaScript">
          document.write(now.getHours());
          </SCRIPT>
        </TD>
        <TD class = "note">0 to 23</TD>
      </TR>
      <TR>
        <TD class = "exp">now.getMinutes()</TD>
        <TD class=val>
          <SCRIPT TYPE = "text/JavaScript">
          document.write(now.getMinutes());
          </SCRIPT>
        </TD>
        <TD class = "note">0 to 59</TD>
      </TR>
      <TR>
        <TD class = "exp">now.getSeconds()</TD>
        <TD class = "val">
          <SCRIPT TYPE = "text/JavaScript">
          document.write(now.getSeconds());
          </SCRIPT>
        </TD>
        <TD class = "note">0 to 59</TD>
      </TR>
      <TR>
        <TD class = "exp">now.getTime()</TD>
        <TD class = "val">
          <SCRIPT TYPE = "text/JavaScript">
          document.write(now.getTime());
          </SCRIPT>
        </TD>
        <TD class = "note">Milliseconds since Jan 1, 1970 (the "epoch")
      </TR>
		 <TR>
        <TD class = "exp">now.getYear()</TD>
        <TD class = "val">
          <SCRIPT TYPE = "text/JavaScript">
          document.write(now.getYear());
          </SCRIPT>
        </TD>
        <TD class = "note">Deprecated. Use .getFullYear() instead.</TD>
      </TR>
    </TABLE>  
				
<br><br>				
<p>W3 Schools has a <a href="
http://www.w3schools.com/jsref/jsref_obj_date.asp">complete list of
methods for <code>Date</code> objects</a>.

<h2 id="date_formatting">Date Formatting</h2>

<p>A date object contains
  a collection of information about the date and time. The default way that 
	Javascript formats this object is shown below:
	
	<script>
		var today = new Date();
		document.write("<blockquote>In Wellesley, MA, the date is " 
								+ '<em>' + today + '</em>'
                + ".<\/blockquote>");
	</script>
	
	<p>For better
  human-readability, we will need to <em>format</em> it in some
  conventional way, using, for example, slashes and commas to separate the
  various numbers.

<p>Here is the date, formatted as is done in the United States and a small
  handful of other countries:

<script type="text/JavaScript">
var today = new Date();

var the_day = today.getDate();
var the_month = today.getMonth() + 1; // because Jan is 0, Feb is 1, etc. 
var the_year = today.getFullYear();
var current_date = the_month + "/" + the_day + "/" + the_year;

var the_hour = today.getHours();
var the_minute = today.getMinutes();
var the_second = today.getSeconds();
var current_time = the_hour + ":" + the_minute + ":" + the_second;

document.write("<blockquote>In Wellesley, MA, the date is " 
                + current_date
                + " and the time is " 
                + current_time
                + ".<\/blockquote>");
</script>

<p>Here is JavaScript code that does this: <!--(you can also view the page
created by embedding this code in a <a href="date.html">complete HTML file
for printing the date</a>)-->:

<pre class="sh_javascript">
// create a Date object, representing this moment, and store it
var today = new Date();

// format info about the day
var the_day = today.getDate();
var the_month = today.getMonth() + 1; // Add 1 because Jan is 0, Feb is 1, etc. 
var the_year = today.getFullYear();
var current_date = the_month + "/" + the_day + "/" + the_year;

// format info about the time
var the_hour = today.getHours();
var the_minute = today.getMinutes();
var the_second = today.getSeconds();
var current_time = the_hour + ":" + the_minute + ":" + the_second;

document.write("&lt;blockquote&gt;In Wellesley, MA, the date is " 
                + current_date
                + " and the time is " 
                + current_time
                + ".&lt;\/blockquote&gt;");
</pre>

<p>Let's examine the code. It is a sequence of JavaScript statements,
which will be executed sequentially by the browser.  The first statement
creates a <code>Date</code> object representing the current date and time,
and stores it in a variable named <code>today</code>.  Subsequent
statements extract components of this <code>Date</code> object and piece
them together.  The final <code>document.write()</code> statement displays
the date and time on the page.

<p>As shown below, we could get by with only the single
variable <code>today</code>. Although the other variables are not strictly
necessary, they can help to make the code more readable.  Note that
there's nothing special about naming the variable <code>today</code>.  We
could have called it anything else.

<pre class="sh_javascript">
// create a Date object, representing this moment, and store it
var today = new Date();

document.write("&lt;blockquote&gt;In Wellesley, MA, the date is " 
                + (today.getMonth() + 1) 
                + "/" + today.getDate() 
                + "/" + today.getFullYear()
                + " and the time is " 
                + today.getHours() 
                + ":" + today.getMinutes() 
                + ":" + today.getSeconds()
                + ".&lt;\/blockquote&gt;");
</pre>

<P>Practice the behavior of the code by using the execution box below.
Change the code to display the date in the format that most of the world
uses, namely, DD/MM/YYYY.

<p>Remember:

<ul>

  <li>In the execution boxes you do not need
    the <code>&lt;script&gt;</code> tags.  They are implied.

  <li> In the execution boxes, use <code>alert()</code> rather
    than <code>document.write()</code>.  In
    fact, <code>document.write()</code> will not work properly in an
    execution box.

</ul>

<h4>Exercise on Date Formatting</h4>
<form action="">
<div>
<textarea rows=15 cols=80></textarea><br>
<input type=button value="Execute it" 
       onclick="eval(this.parentNode.firstElementChild.value)">
</div>
</form>
  
  <div class="bs-callout bs-callout-info">
  <h4>Methods for formatting <code>Date</code> objects</h4>
  <p>The above formatting example is important to understand the
    different <code>get...()</code> methods to access different properties
    of the <code>Date</code>object. However, once you have a good familiarity
    with these methods, it is tedious to have to format a date with so many
    lines of code. The table below contains a list of some formatting methods
    that we will be using in our examples.</p>
  </div>

  <script type = "text/JavaScript">
    // Create a date object representing the current time. 
       var now = new Date(); 
    </script>
  
  <table border = "1">
      <tr>
        <TH class = "exp">Expression</TH>
        <TH class = "val">Value</TH>
      </TR>
      <TR>
        <TD class = "exp">now.toDateString()</TD>
        <TD class = "val">
          <SCRIPT TYPE = "text/JavaScript">
          document.write(now.toDateString());
          </SCRIPT>
        </TD>
      </TR>
  <TR>
        <TD class = "exp">now.toGMTString()</TD>
        <TD class = "val">
          <SCRIPT TYPE = "text/JavaScript">
          document.write(now.toGMTString());
          </SCRIPT>
        </TD>
      </TR>
   <TR>
        <TD class = "exp">now.toLocaleDateString()</TD>
        <TD class = "val">
          <SCRIPT TYPE = "text/JavaScript">
          document.write(now.toLocaleDateString());
          </SCRIPT>
        </TD>
      </TR>
  
     <TR>
        <TD class = "exp">now.toLocaleString()</TD>
        <TD class = "val">
          <SCRIPT TYPE = "text/JavaScript">
          document.write(now.toLocaleString());
          </SCRIPT>
        </TD>
      </TR>
  
       <TR>
        <TD class = "exp">now.toLocaleTimeString()</TD>
        <TD class = "val">
          <SCRIPT TYPE = "text/JavaScript">
          document.write(now.toLocaleTimeString());
          </SCRIPT>
        </TD>
      </TR>
         <TR>
        <TD class = "exp">now.toTimeString()</TD>
        <TD class = "val">
          <SCRIPT TYPE = "text/JavaScript">
          document.write(now.toTimeString());
          </SCRIPT>
        </TD>
      </TR>
           <TR>
        <TD class = "exp">now.toString()</TD>
        <TD class = "val">
          <SCRIPT TYPE = "text/JavaScript">
          document.write(now.toString());
          </SCRIPT>
        </TD>
      </TR>
       </table>
         
<h2 id="more">More on Dates</h2>  
<p>We saw how to create a date object with <code>new Date()</code>. This expression,
always evaluates to the current date/time. However, one can use the same method to create other
dates. The method <code>Date()</code> is known in a programming language as the <em>constructor</em>,
			a special method that allows us to create new objects. To achieve this, the constructor,
	can be invoked with <em>arguments</em>, which are values provided inside the parantheses. 
	We have seen many examples of functions
			or methods that take arguments (<code>alert</code>, <code>prompt</code>, 
	<code>document.querySelector</code>, etc.) In all these cases, the kind of value that we passed
			as an argument was always a string. </p>			
	
	<p>However, a <code>constructor</code> method is special and it can be invoked with different
			kinds of values and different number of arguments. Below are shown the different ways
			one can invoke <code>Date()</code>:</p>
			
	<pre>
var date1 = new Date();
var date2 = new Date(milliseconds);
var date3 = new Date(dateString);
var date4 = new Date(year, month, day);
var date5 = new Date(year, month, day, hours, minutes);
var date6 = new Date(year, month, day, hours, minutes, seconds, milliseconds);
</pre>

<p>Being able to create objects that are different from the current day, allows us to
	perform operations with dates such as comparing them, adding, and subtracting.</p>
			
<div class="bs-callout bs-callout-warning">
			<h4>Example: Number of remaing days</h4>
	<p>Suppose you want to create a date counter to let one know how many days until
	a certain day such as Christmas, Thanksgiving, or start of Spring Break.</p>
	<p>To do that, you first create a date object with the desired date, then check to
	see if that day has not already passed, and if that is the case, calculate the number of days left.</p>
	<p>There is only one problem, when subtracting two days, the result is always <em>milliseconds</em>.
	One will need to write some code to convert milliseconds in days or other desired unit times (months, etc.).</p>
	<p>The code below shows the number of days left until the start of Thanksgiving.</p>			
</div>
			
<div>
<textarea rows=17 cols=80>
// Javascript code to calculate the number of days left until a certain date.

var springBreak = new Date("2015/03/19");
var today = new Date();

if (springBreak > today) {
	var millisecs = springBreak - today;
	alert("There are " + millisecs + " millisecs left until Spring Break.");

	// convert millisecs to days
	// 1 sec = 1000 ms; 1 hour = 3600 sec; 1 day = 24 hours
	// thus, find seconds, find hours, find days, round up to days
	var nrDays = Math.ceil(millisecs / (1000 * 3600 * 24))  
	alert("There are " + nrDays + " days left until Spring Break.");
}
</textarea><br>
<input type=button value="Execute it" 
       onclick="eval(this.parentNode.firstElementChild.value)">
</div>
				
<br>
<h4>Experiment with the code</h4>
<p>What happens if you change the date from "2015/03/19" to "2014/03/19"? Why?</p>
<p>Replace the argument "2015/03/19" with the proper number and values of arguments 
  to use in the constructor invocation: <code>Date(year, month, day)</code>.</p>
			
   </div><!--end of "col-md-8"-->
            
 </div><!--end of "row"-->

    <!--#include virtual="/~cs110/modularity/footer.part" -->
    
    </div> <!--end of container>
        
        
    <!--#include virtual="/~cs110/modularity/bs-footer.part" -->
  </body>

</html>
