<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class Activities</title>
    <!--#include virtual="../../modularity/bs-head.part" -->
    <link rel="stylesheet" type="text/css" href="http://cs.wellesley.edu/~cs307/js/google-code-prettify/prettify-sda.css">
  <script src="http://google-code-prettify.googlecode.com/svn/loader/prettify.js"></script>
  <link rel="stylesheet" href="prettify.css">
    <style>
      #TOC_list {list-style-type: none;}
    </style>
    
  </head>
  <body>
    <!--#include virtual="../../modularity/navbar.part" -->

    <div class="container">
      <h1>Arrays, Objects, the <code>for</code> Loop</h1>
      <hr>
    </div>
      
    <div class="container">
      <div class="row">
     
        <div class="col-md-3">
          <div class="bs-sidebar hidden-print" role="complementary">
            <ul class="nav bs-sidenav">  
              <div id="insert_TOC_here"></div>
            </ul>
          </div>
        </div>

        <div class="col-md-8">
<h2>Goal</h2>

<p>By the end of today, you will be able to:
  <ol>
    <li>understand what an array is, how to declare it, how to access its elements
      
    <li>understand how a <code>for</code> loop works and guess the output of code that uses loops
      
    <li>understand how to create object literals and how to use them in code
      
    <li>generate HTML code on the fly using arrays, objects, and <code>for</code> loops
  </ol>

    
<h2>Review</h2>

<p>Before the break, we covered a lot of ground. Let's review:
  <ul>
    <li>DOM:
      <ul>
        <li>Thanks to the DOM, JavaScript can get information about the
        document and modify the document.
          
        <li>It can get the values of form inputs
          
        <li>It can set the <code>innerHTML</code> of elements, change
        their CSS styles and classes, and much more
          
        <li>It can create new elements, add content to them, and attach
        them to the document.
      </ul>
      
    <li>Functions:
      <ul>
        <li>Functions are a fundamental structuring mechanism for
        programs. 
          
        <li>A function wraps up a chunk of code into a single thing that
        can be executed (<em>invoked</em>) when we want.  For example:
<pre class="prettyprint lang-js linenums executable">
function fred () {
    alert("But Mom, I'm George! Don't you know your own son?");
    alert("Just kidding; I am Fred.");
}
</pre>          
          
        <li>Usually, the function has a name and the name is used when
        invoking the function.  For example:
<pre class="prettyprint lang-js linenums executable">
fred();  // smart remarks
</pre>          

        <li>Functions can be <em>event handlers,</em> invoked by the
        browser when some event occurs to some element, such as clicking
        on a button.

        <li>Soon, we'll learn ways to make functions even more powerful
        and general.
      </ul>
      
    <li>Conditionals
      <ul>
        <li>The <code>if</code> statement uses a <em>boolean
        expression</em> to determinine whether to execute some chunk of
        code
          
        <li>With an <code>else</code> clause, provides an alternative.
          
        <li>With a <em>cascading if</em>, several alternatives can be
        considered.
      </ul>
      
    <li>Objects
      <ul>
        <li>Provide a general mechanism for packaging up some data. We
        focussed on <em>date</em> objects at first.
          
        <li><em>Methods</em> provide a way to operate on that data.
          
        <li>Can create your own objects like this:
<pre class="prettyprint lang-js linenums executable">
var fred = {name: "Fred Weasley", house: "Gryffindor", age: 17}
</pre>          
      </ul>
  </ul>


<h2>Recap Arrays and Loops</h2>

<p>The new info for today is <em>arrays</em> and <em>loops</em>.

<p>Let's start with arrays (sometimes also called <em>lists</em>).
  <ul>
    <li>An array is a <em>compound</em> data structure. That is, it has
    parts. Here's an example:
<pre class="prettyprint lang-js linenums executable">
var horcruxes = ["locket", "ring", "diadem", "cup"];
</pre>      
      
    <li>You get at each part by its numerical <em>index</em> (where it is
    in the array). Numbering starts at zero. Which one is this?
<pre class="prettyprint lang-js linenums executable">
var next = horcruxes[2];
</pre>      

    <li>You can use assignment on array slots to overwrite existing values or store new ones:
<pre class="prettyprint lang-js linenums executable">
horcruxes[0] = "diary"; // changes horcrux[0] from "locket" to "diary"
horcruxes[4] = "locket"; // adds new slot at index 4 containing "locket"
</pre>      

    <li>The <code>.push(newElement)</code> array method adds a new slot at the
    end of the array containing  <code>newElement</code>. 
<pre class="prettyprint lang-js linenums executable">
horcruxes.push("nagini"); // adds new slot at index 5 containing "nagini"
</pre>      


    <li>arrays have properties like <code>length</code>:
<pre class="prettyprint lang-js linenums executable">
if( horcruxes.length < 7 ) { alert("keep looking!"); }
</pre>      

  </ul>

<p>Loops are a general way of repeating a chunk of code N times. When you
  want to do something (a chunk of code) for every element of an array,
  loops are invaluable.

<p>We will not be exploring loops in all their multifarious
  manifestations; we'll use them as an incantation for doing things with an
  array. So you'll almost always see something this:
<pre class="prettyprint lang-js linenums executable">
for(var i = 0; i < the_array.length; i = i + 1 ) {
    var elt = the_array[i];
    // code to process element i
}
</pre>  

    <h2>Quiz Question Nr. 1</h2> 

      <p>Given the following code, choose the appropriate answer:
        
<pre class="prettyprint lang-js">
var numbers = [1,3,5,7,9];
console.log("Result is: " + numbers[1] + " and " + numbers.indexOf(1));
</pre>
<br>
<ol type="A">
<li>  
<pre class="prettyprint lang-js">
Result is: 1 and 1
</pre>
<li>
<pre class="prettyprint lang-js">
Result is: 1 and 0
</pre>
<li>
  <pre class="prettyprint lang-js">
Result is: 3 and 1
</pre>
<li>
  <pre class="prettyprint lang-js">
Result is: 3 and 0  
</pre>
</ol>
          
<h2>Quiz Question Nr. 2</h2> 
<p>What is the output of executing the following code:
  <pre class="prettyprint lang-js">
  var letters = ['d','m','b','p'];
  letters.push("c");
  letters.sort(); // sort elements from the smallest to the largest
  console.log(letters.indexOf('d'));
</pre>
 <br>         
<ol type="A">
  <li>
<pre class="prettyprint lang-js">
0
</pre>

  <li>
<pre class="prettyprint lang-js">
1
</pre>

  <li>
<pre class="prettyprint lang-js">
2
</pre>

  <li>
<pre class="prettyprint lang-js">
3
</pre>  
</ol>          
   
      
<h2>Quiz Question Nr. 3</h2> 
<p>What is the output of executing the following code:
  <pre class="prettyprint lang-js">
  var nums = [0,1,2,3];
  var products = []; // creates an empty array
  
  for (var i=0; i&lt;nums.length; i=i+1){
    products.push(i * nums[i]);
  }
  console.log(products);
</pre>
<br>
<ol type="A">
  <li>
<pre class="prettyprint lang-js">
[0, 1, 2, 3]
</pre>

  <li>
<pre class="prettyprint lang-js">
[0, 2, 6, 12]
</pre>

  <li>
<pre class="prettyprint lang-js">
[0, 1, 4, 9]
</pre>

  <li>
<pre class="prettyprint lang-js">
None of the above.
</pre>  
</ol>

<h2>New Operators</h2>
<p>Sometimes, you'll see code like this:</p>
<pre class="prettyprint lang-js">
var total = 0;
for (var i=0; i&lt;100; i++){
  total += i;
}
console.log("Total is: ", total);
</pre>
 <br>         
which, of course, is 5050 (<a href="http://mathcentral.uregina.ca/QQ/database/QQ.02.06/jo1.html">Gauss famous problem</a>). There are two new operators in this code:<br>
<ol>
<li>The compound operator <code>+=</code>: <code>total += i</code> is a shorthand for the 
statement <code>total = total + i</code>.
<li>The increment operator <code>++</code>: <code>i++</code> is a shorthand for the statement <code>i = i + 1</code>.</li>
</ol>

<h2>Quiz Question Nr. 4</h2>
<p>What is the result of the following statements?

<pre class="prettyprint lang-js">
var studentsArr = [{name: "Harry Potter", house: "Gryffindor"}, 
                   {name: "Draco Malfoy", house: "Slytherin"}, 
                   {name: "Ron Weasley", house: "Gryffindor"}, 
                   {name: "Luna Lovegood", house: "Ravenclaw"}, 
                   {name: "Cedrig Diggory", house: "Hufflepuff"}];
                   
var gryffindors = 0;

for (var i=0; i&lt;studentsArr.length; i++){
   var student = studentsArr[i];
   var houseName = student.house;
   if( houseName == "Gryffindor" ) {
      gryffindors++;
   }
}
console.log(gryffindors);
</pre>
<br>
<ol type="A">
  <li>0
  <li>1
  <li>2
  <li>3
</ol>

<h2>Quiz Question Nr. 5</h2>
<p>What is the result of the following statements?

<pre class="prettyprint lang-js">
var studentsArr = [{name: "Harry Potter", house: "Gryffindor"}, 
                   {name: "Drago Malfoy", house: "Slytherin"}, 
                   {name: "Ron Weasley", house: "Gryffindor"}, 
                   {name: "Luna Lovegood", house: "Ravenclaw"}, 
                   {name: "Cedrig Diggory", house: "Hufflepuff"}];
                   
var housesCntr = {Gryffindor: 0, Hufflepuff: 0, Ravenclaw: 0, Slytherin: 0}

for (var i=0; i&lt;studentsArr.length; i++){
   var student = studentsArr[i];
   var houseName = student.house;
   housesCntr[houseName] += 1;
}
console.log(housesCntr);
</pre>
<br>
<ol type="A">
  <li>
<pre class="prettyprint lang-js">
Object {Gryffindor: 2, Hufflepuff: 1, Ravenclaw: 1, Slytherin: 0} 
</pre>
  <li>
<pre class="prettyprint lang-js">
Object {Gryffindor: 2, Hufflepuff: 1, Ravenclaw: 0, Slytherin: 0} 
</pre> 
<li>
<pre class="prettyprint lang-js">
Object {Gryffindor: 2, Hufflepuff: 1, Ravenclaw: 1, Slytherin: 1} 
</pre>
  <li>
<pre class="prettyprint lang-js">
Object {Gryffindor: 1, Hufflepuff: 0, Ravenclaw: 1, Slytherin: 0} 
</pre> 
    </ol>


<div class="alert alert-warning">
<h4>Complex statements</h4>
<p>Since you are just starting learning about constructs such as
arrays, objects, and loops, we are using intermediary variables to make it easier
for you to understand the code. However, when you read code on the web, you'll 
often notice more abstract and complex statements that perform in very few lines
of code the same operations. For example, the three statements in the <code>for</code>
loop above can be written in a single line:</p>
<pre>housesCntr[studentsArr[i].house]+=1;</pre>
<p>Don't feel you should aspire to this level of brevity!
</div>

<!-- var i = Math.floor(12*Math.random()); -->

<!-- [lyn, 2015/03/30] Modified this previous version of the exercise,
     which uses the hard-to-understand Math.random(), to instead prompt
     the user for a month name.
<h2>Exercise 1</h2>
<p>Given the two following arrays <code>months</code> and <code>days</code>
          as well as the <code>Math.random()</code> function you used in lab,
          write a program that every time is run randomly alerts statements such
          as: "February has 28 days" or "August has 31 days". 
  <strong>You may not use if else statements.</strong>
          Solve the problem by using array indices.</p>
<div>
<textarea rows=13 cols=90>
var months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
var days = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];  
  
// Generates a number from 0 to 11 (inclusive), so 0 to 12 (exclusive)
  
alert("i is "+i);

// using the i value above, generate the message
alert("month M has N days");

</textarea><br>
<button onclick="eval(this.parentNode.firstElementChild.value);">Execute it</button> 
</div>
-->

<h2>Exercise 1</h2>
<p>Given the two following arrays <code>months</code> and <code>days</code>, 
          write a program that prompts the user for a 3-character month name and 
          then pops up an alert with the number of days in that month, e.g., 
          as: "Feb has 28 days" or "Aug has 31 days". 
  <strong>You may not use if/else statements.</strong>
          Solve the problem by using array indices.</p>
<div>
<textarea rows=13 cols=90>
var months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
var days = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];  

monthName = prompt("Enter the name of a month (three characters, first capitalized):")

// First use indexOf to find the index of the month, 
// and then use that index to find the number of days at that index. 

monthIndex = -1;  // Change this. 
alert("month " + monthName + " has N days"); // Change this. 

</textarea><br>
<button onclick="eval(this.parentNode.firstElementChild.value);">Execute it</button> 
</div>


<h2>The Animals Gallery</h2>
<p>You might remember the screencast from the <a href="screencast.html#animals">Animals Gallery</a>
in the <a href="objectliterals.html">Our Own Objects</a> lecture notes.</p>
<p>We'll try to write some of the code step by step in the following exercises. You will have
          a chance to complete the whole functionality in the next lab.</p>
  
 <div class="alert alert-warning">
<h4>The Code</h4>          
<p>You can choose to either download the folder <code>animals</code> from your cs110 <code>Download</code>
  directory or work from this <a href="http://jsfiddle.net/reeq8cnr/2/" target="_blank">jsFiddle</a>. 
  If you are doing this outside class, we recommend
   that you use the folder, because you get experience working with the complete files.</p>          
</div>         
          
  <h2>Exercise 2a</h2>
<p>The jsFiddle already has the Javascript code to dynamically add one
  thumbnail image to the page, but the <code>src</code>
  and <code>alt</code> are <q>hard-coded</q> (directly typed in), instead
  of being drawn from the array of image description objects.  Rewrite the
  code so that it makes the thumbnail using the data from a particular
  object in the array, say the first one.  We suggest creating a new
  variable to refer to the object from the array; that will make the next
  exercise easier.</p>

<h2>Exercise 2b</h2>
    Wrap the block of code from the first part in a <code>for</code> loop
    so that will show all thumbnails for <em>all</em> the images in the
    array instead of just the one.

  <h2>Exercise 2c</h2>
   <p>Add one line of code to the <code>for</code> loop that "binds" the name of the
          function <code>showImage</code> to the attribute <code>onclick</code> of every
          small image. This is done with this line: <code>imgEl.onclick = showImage;</code></p>       
          Run again the page and click on a thumbnail. What do you see? Why?
   
  <h2>Exercise 2d</h2>
  <p>Do you recall the special variable <code>this</code>? We have discussed it 
          <a href="http://cs.wellesley.edu/~cs110/lectures/L09/jsforms.html#handlers">earlier in the
    semester.</a></p>
  <p>Using the special variable <code>this</code> and the properties <code>src</code> and <code>alt</code>
    of the object referred by <code>this</code>, complete the function <code>showImage()</code>, so that 
    a big version of each thumbnail is displayed within
    the <code>figure</code> element. Also show the
    <code>alt</code> value in the <code>figcaption</code>. Note that in
    these cases you'll be modifying existing elements of the document
    rather than making and appending new ones.  So craft the appropriate
    selector to get them and then modify them.
          
  <div class="alert alert-warning">
    <h4>The <code>onLoad</code> attribute</h4>  
    Our <code>for</code> loop is not wrapped in any function in the jsFiddle. This works because 
    jsFiddle automatically executes the JS portion only after the <code>onLoad</code> event was 
    fired. (See the drop-down menu on the left-side of the jsFiddle page). When you try this 
    example outside jsFiddle, you'll need to wrap the code in a function and invoke the function
    with the <code>onLoad</code> attribute. See our files to make sure you understand this part.
  </div>
<h2>Summary</h2>

<p>We hope that after these activities you have a good understanding of:
  <ul>

    <li>arrays, their definition, and the use of indices
    <li>the syntax of a <code>for</code> loop</li> and how it is used with arrays
    <li>objects and that we can iterate with a for loop over their properties as well</li>
    <li>how arrays, objects, and loops can be used to generate HTML on the fly</li>
    </ul>

      </div><!-- end of row -->
    </div><!-- end of class=container -->



    <!--#include virtual="../../modularity/bs-footer.part" -->
    <script src="../../js/TOC.js"></script>
    <script src="/~cs307/js/google-code-prettify/prettify.js"></script>
    <script>insertTOC_textual(); prettyPrint();</script>
    <script>
      function hideAnswer() {
          $("pre",this)
              .css('border-color','red')
              .css('background-color','#FF8080')
              .fadeOut(1000);
          $("p",this)
              .css('border-color','red')
              .css('background-color','#FF8080')
              .fadeOut(1000);
      }

      $("ol[type='A'] > li").click(hideAnswer);
    </script>
   </div>
  </div>
  <!--#include virtual="/~cs110/modularity/footer.part" -->
 </div> <!--end of container>
        
        
 <!--#include virtual="/~cs110/modularity/bs-footer.part" -->
  </body>
</html>
