<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name=author content="Scott D. Anderson and the CS110 Staff">
    <meta name=description content="How sound is represented in analog and
    digital signals, including error detection, error correction, sampling
    error, and the Nyquist theorem">
    <meta name=keywords content="sound representation, analog, digital,
    error, detection, correction, sampling, Nyquist">
    <link rel="stylesheet" type="text/css" href="../../cs110-main-style.css">
    <title>Analog and Digital</title>
    <style type="text/css">
       body {width: 480px;}
       pre {font-size: 90%}
       code {font-size: 100%}
    </style>
</head>
<body>

<h1>Sound and Movies</h1>

<h2>Sound Waves</h2>

<P>Sound is produced by the <strong><em>vibration of an object in air or liquid</em></strong>

<br>Sound moves very fast through <strong><em>waves of pressure</em></strong>
(in air, 340 m/sec = 750 miles/hour)

<p><IMG SRC="wavegraph3.gif" ALT="A signal is an undulating curve" width="350">

<p>The sound wave for a pure tone is characterized by its <strong><em>frequency</em>
(pitch)</strong> and <strong><em>amplitude</em> (loudness)</strong>

<p>Frequency is measured in <strong><em>Hz</em></strong> or <strong><em>cycles per 
second</em></strong>.  
Humans can hear frequencies between 20 Hz and 20,000 Hz (20 KHz). Amplitude is measured 
in <strong><em>deciBels</em></strong>.

<p>Sound waves for a short music clip:

<!-- http://tech2.in.com/india/topstuff/general/eq-for-dummies/31991/0 -->
<p><img src="soundwave.jpg" alt="music sound waves" width="250">

<h2>Analog vs. Digital Representations of Sound</h2>

<p>In an <strong><em>analog</em></strong> representation of sound, some physical property,
such as voltage, <strong><em>varies continuously</em></strong> in frequency and amplitude:

<blockquote><p><img SRC="analog-before.png"  ALT="the transmitted signal" 
width="180"></blockquote>

<p>An analog signal can be <strong><em>sampled</em></strong> to create a 
<strong><em>digital representation of sound:</em></strong>

<blockquote><p><img SRC="analog-sampling.png" 
ALT="dots drawn on the grid intersections nearest the curve" width="180"></blockquote>

<p>In a digital representation, the signal is conveyed by a sequence of discrete
numbers:

<br>&nbsp;&nbsp;&nbsp;0 &nbsp; 5 &nbsp; 3 &nbsp; 3 &nbsp; -4 &nbsp; -6 &nbsp; -2 &nbsp;  2 &nbsp; ...

<p>
<img src="soundSample.png" alt="digitizing sound" width="130"
     style = "float: left; border: 1px solid black; padding: 5px 0 5px 5px;
              margin: 5px 10px 5px 0px">
<div style="margin-left: 140px">
<p>Two important factors in the sampling process affect <strong><em>sound 
quality</em></strong> and the <strong><em>file size</em></strong> needed to store audio 
signals:

<ul>
   <li><strong><em>sampling rate:</em></strong> number of samples per second (Hz),<br> 
    usually between 11 - 44.1 KHz
   <li><strong><em>bit-resolution:</em></strong> number of bits per sample,<br> 
    usually between 8 - 32 bits
</ul>
<p>The choice of sampling rate and bit-resolution depend in part on the type of audio
information being represented:
<ul>
   <li>speech in native language: 11 KHz, 8 bits
   <li>CD quality music: 44.1 KHz, 16 bits
</ul>
</div>
<p>How frequently should we sample? The <strong><em>Nyquist Sampling Theorem</em></strong> says:

<blockquote><p>Sample twice as often as the highest frequency you want to capture</p></blockquote>

<p style="clear: left;">When converting from a digital representation back to analog 
(e.g. listening through a speaker), the quality of the reconstructed signal 
(dashed curves below) depends on the original sampling rate:

<p><img SRC="analog-reconstructed.png"  
ALT="a reconstruction by drawing a curve through the dots" width="220">
         
<img src="analog-reconstructed-improved.png"
 alt="a better reconstruction by drawing a curve through a dots on a finer grid"
 width="220">

<p>High sampling rate and bit-resolution yield high quality sound, but require
<strong><em>large file sizes!</em></strong> 

<p>The <strong><em>bit-rate</em></strong> is the number of bits needed
to store 1 second of audio:

<blockquote style="border: 2px solid red; padding: 0 10px; width: 340px;
                   margin-left: 0px;">
<p><strong>bit rate (bits per second) = bit-resolution x sampling rate</strong>
<p><strong>file size (in bits) = bit rate x recording time</strong>
</blockquote>

<p style="padding: 0 0 15px 0"><strong>How many bits in 1 second of monophonic CD music?</strong>

<p style="padding: 0 0 15px 0"><strong>How many bits in 1 second of stereo CD music?</strong> 

<p style="padding: 0 0 15px 0"><strong>How many bits in one hour of stereo CD music?</strong>

 <blockquote>
 <p>16 bits per sample x 44100 samples per second x 1 second = 705,600 bits
 <p>705,600 bits / 8 bits per byte = 88,200 bytes &asymp; 88 KB
 </blockquote>
         
<P>For stereo, add another 88 KB for the second channel for a total bit-rate of
176 KB/second!

<p>For an hour of CD-quality stereo music

<blockquote>
<p>176 KB/sec x 3600 seconds/hour = 633,600 KB &asymp; 634 MB
</blockquote>

<p>634 MB is about the size of a CD &mdash; it's not accidental that a
CD can hold about 1 hour of music, it was designed that way!

<p>Check out 
<a href="http://cs.wellesley.edu/~cs110/lectures/M07-analog-and-digital/gravity-clip">this comparison</a>
of a sound clip at various resolutions and sampling rates. 

<p><strong>Will we need to have such large file sizes for sound clips on our web pages?</strong>
No, thanks to <strong><em>audio compression techniques</em></strong>, used in file formats such as
<a href="http://www.apple.com/quicktime/whyqt/"> Quicktime</A>, AVI,
RealAudio and MP3.

<H2>Degradation</H2>
         
         <P>Any time signals are transmitted, there will be some
         degradation of quality:
<br>&nbsp;&nbsp;&nbsp;1. signals may fade with time and distance
<br>&nbsp;&nbsp;&nbsp;2. signals may get combined with interference from other
            sources (static)
<br>&nbsp;&nbsp;&nbsp;3. signals may be chopped up or lost
         
         <br>When we continue to transmit and transform signals, the
         effect is compounded. 

<br>However, <strong><em>digital transmission and storage</em></strong> of information 
allows the possibility for creating <strong><em>perfect (undegraded) copies</em></strong>
of the information, because we only need to distinguish 1's from 0's, and because errors
in transmission can be detected and corrected.
         
<H2>Movies</H2>

<p><img src="ballShot.jpg" alt="first frame of ball movie" width="130"
        style="float: right">
<!--
<p>
<OBJECT width="160" height="136"> 
<PARAM name="movie" value="bounceBall.mov">
<EMBED src="../M08-movies-and-sound/bounceBall.mov" style="float: right"
       PluginsPage="http://www.apple.com/quicktime/download/" 
       WIDTH=225
       HEIGHT=250 CONTROLLER=true LOOP=false AUTOPLAY=false>
</EMBED> 
</OBJECT>
-->
<p>A movie is a <strong><em>sequence of images displayed at a fast pace</em></strong>

<br>The size of a movie file is many times the size of a single image.
<br>Suppose we have a 3-second movie that displays 15 frames per second, and 
each image frame has a width of 160 pixels, height of 120 pixels, and bit-depth 
of 2 (only 4 colors!)

<p><strong>Size of each image:</strong> 
<br>&nbsp;&nbsp;&nbsp;
(160 x 120 pixels) x 2 bits/pixel = 38400 bits &asymp; 4.8 KB

<p><strong>Total file size:</strong> 
&nbsp;&nbsp;4.8 KB/frame x 15 frames/sec x 3 sec = 216 KB</p>

<p>And this does not include any sound!

Fortunately <strong><em>movie files can be compressed!</em></strong> The bouncing ball 
movie is only 103KB in the Quicktime movie format. 

<H2>Add Movies and Sound to Web Pages</H2>

<P>Sound and movies can be added to web pages using the <code>&lt;embed&gt;</code> tag:

<p><img src="ghostShot.jpg" alt="first frame of ghost movie" width="110">
<!--
<P>
<OBJECT width="160" height="136"> 
<PARAM name="movie" value="../M08-movies-and-sound/ghost.mov"> </PARAM>
<EMBED SRC="../M08-movies-and-sound/ghost.mov"
          PluginsPage="http://www.apple.com/quicktime/download/" 
          WIDTH="160"
          HEIGHT="136" 
          CONTROLLER="TRUE" 
          LOOP="false" 
          AUTOPLAY="false"></EMBED>
</OBJECT>
-->
<PRE>
&lt;<span style="color: red">embed</span> src = "ghost.mov"
       PluginsPage = "http://www.apple.com/quicktime/download/"
       width = "160"
       height = "136"
       controller = "true"
       loop = "false"
       autoplay = "false"&gt;
&lt;<span style="color: red">/embed</span>&gt;
</PRE>

<p>Some attributes for the <code>&lt;embed&gt;</code> tag:

<ul>
  <li><code>PluginsPage</code> directs the browser to visit a website containing the 
    appropriate plug-in to handle Quicktime movies
  <li><code>height</code> and <code>width</code> control the size of the movie window 
    that appears on the page (16 of the 136 pixels are occupied by the controller, so
    the real movie is 160 by 120 pixels)
  <li><code>controller</code> is <code>true</code> or <code>false</code>, and controls
    the visibility of the controller bar below the movie window (without the controller
    bar, you can double-click and click on the window to start and stop the movie)
  <li><code>loop</code> is <code>true</code> or <code>false</code>, and controls whether
    the movie restarts from the beginning after it plays
  <li><code>autoplay</code> is <code>true</code> or <code>false</code>, and controls 
    whether the movie starts playing as soon as a sufficient portion has been loaded
</ul>

<p>Display a YouTube video:

&nbsp;&nbsp;&nbsp;<img src="robotShot.jpg" alt="first frame of robot movie" width="100">

<!--
<p>
<embed style="margin:10px;" 
       src="http://www.youtube.com/v/v7Nmpp94buo" 
       type="application/x-shockwave-flash" 
       width="255" 
       height="210"> </embed>
-->
<pre>
&lt;embed src = "http://www.youtube.com/v/v7Nmpp94buo" 
       type = "application/x-shockwave-flash" 
       width = "255" 
       height = "210"&gt; 
&lt;/embed&gt;
</pre>

<p>Use the <code>&lt;embed&gt;</code> tag to add sound:

&nbsp;&nbsp;<img src="controlShot.jpg" alt="image of controller" width="200px">
<!--
<p>
<EMBED STYLE="margin:5px;" SRC="../M08-movies-and-sound/friends.mov"
  PLUGINSPAGE="http://quicktime.apple.com" 
  WIDTH=200 HEIGHT=16
  CONTROLLER=TRUE 
  LOOP=FALSE 
  AUTOPLAY=FALSE>
-->
<PRE>
&lt;embed src = "friends.mov"
       PluginsPage = "http://quicktime.apple.com"
       height = "16"
       width = "200"
       controller = "true"
       loop = "false"
       autoplay = "false"&gt;
&lt;/embed&gt;
</PRE>

<p>Remember Mission Impossible?

&nbsp;&nbsp;<img src="controlShot.jpg" alt="image of controller" width="200px">
<!--
<p>
<EMBED STYLE="margin:5px;" SRC="../JSfunctions/mission/mission.mp3"
  PLUGINSPAGE="http://quicktime.apple.com" 
  WIDTH=200 HEIGHT=16
  CONTROLLER=TRUE 
  LOOP=FALSE 
  AUTOPLAY=FALSE>
-->
<PRE>
&lt;embed src = "mission.mp3"
       PluginsPage = "http://quicktime.apple.com"
       height = "16"
       width = "200"
       controller = "true"
       loop = "false"
       autoplay = "false"&gt;
&lt;/embed&gt;
</PRE>

</BODY>
</HTML>
