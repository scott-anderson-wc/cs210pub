<!DOCTYPE html>
<!-- Lecture on functions.
Written from scratch by Eni Mustafaraj in Spring 214.
Date: April 1, 2014
-->
<html lang="en">
  <head>
    <meta charset="utf-8">        
    <title>CS110: Everything about Functions</title>
        
    <!--#include virtual="/~cs110/modularity/bs-head.part" -->
    
 </head>
    
  <body>
    <!--#include virtual="/~cs110/modularity/navbar.part" -->
    
    <div class="container">
      <h1>Everything about functions <small>Parameters, return values, local variables</small></h1>
			<hr>
			<div class="alert alert-info">Reading from 
      <a href="http://shop.oreilly.com/product/0636920015048.do">Javascript & jQuery: The Missing Manual</a> 
      - Functions (pp 100 - 114).<br>
				For more interactive examples, check the W3Schools pages: <a href="http://www.w3schools.com/js/js_functions.asp">Functions</a>.<br>
			  For a more in-depth discussion of functions and 
				using objects with functions, read <a href="/~cs110/LocalOnly/chap4_html5.pdf">Chapter 4</a> of 
				<em>Head First HTML5 Programming.</em>
         </div>
    </div>
    
  <div class="container">
      <div class="row">
            
         <!-- Three columns of the grid are reserved for the sidebar-->
        <div class="col-md-3">
          <div class="bs-sidebar hidden-print" role="complementary">
            <ul class="nav bs-sidenav">
              <li><a href="#math">Functions in Mathematics</a></li>
							<li><a href="#anatomy">Anatomy of a Function</a></li>
							<li><a href="#methods">Methods are Functions too</a></li>
							<li><a href="#global">Global vs. Local Variables</a></li>
							<li><a href="#examples">Examples of Functions</a></li>
            </ul>  
          </div><!-- end of "bs-sidebar"-->
        </div><!--end of "col-md-3" div-->
					
					
			  <div class="col-md-8">	
				
  <h2 id="math">Functions in Mathematics</h2>
  <p>As you know, in Mathematics, functions are an important concept that refer 
  to the <em>relation between a set of inputs and a set of outputs, so that every
  input has exactly one output</em>. A well-known example is the function that 
  relates every real number <em>x</em> to its square <em>x<sup>2</sup></em>. 
  If the output is named
  y and the input x, one can write their relation as <em>y = f(x)</em>,
  which is read as: <em>y is a function of x</em>. The Wikipedia image below shows 
  a schematic representation
  for such a relation.</p>
  
  <figure class="text-center">
    <img src="images/function.png" height=170 alt="function schematic" class="img-thumbnail">
    <figcaption>Figure 1: A function as a black box: input x to get as output f(x). 
      <a href="http://en.wikipedia.org/wiki/Function_(mathematics)">Source: Wikipedia</a></figcaption>
  </figure>
          
  <p>A function can be represented through a formula (usually in math), an algorithm
    (in programming), or other ways (tables, graphs, etc., not relevant to us). 
    How a function is represented is not always important, what matters is that
    such a representation allows us to map every input to an output, over and over again.</p>
 
  <p>We can see this principle in the Pythagorean theorem shown below. If we want to calculate the
   hypotenuse of many right triangles, we can write a computer program to do that, by
   exploiting the fact that the hypotenuse is a function of the two triangle sides (catheti).
  </p>
          
    <figure>
      <img src="images/pythagorean.png" alt="pythagorean theorem" class="img-thumbnail">
      <figcaption>Figure 2: Representing the Pythagorean theorem as a function.</a></figcaption>
    </figure>
  
<p>The Javascript function we can write to calculate the hypotenuse and the calculation results
  for the three triangles shown in the image are given below. 
  <strong>Open the console</strong> in your browser and then
  click the "Execute it" button.</p>
 <div>
   <textarea rows=11 cols=80>
   // define the function to calculate the hypotenuse
    
   function hypot(x, y) {
      var h = Math.sqrt(x*x + y*y);
      return h;
   }
   // invoke the function with different input values
   console.log("hypot(3, 4) is : " + hypot(3, 4));
   console.log("hypot(8, 6) is : " + hypot(8, 6));
   console.log("hypot(12, 5) is : " + hypot(12, 5));
   </textarea><br>
<button onclick="eval(this.parentNode.firstElementChild.value);">Execute it</button>       
</div>
        
<h2 id="anatomy">Anatomy of a function</h2>
<p>The following image from the <em>Head First HTML5</em> book summarizes what goes into
a function definition.</p> 
				
 <figure>
      <img src="images/function-anatomy.png" alt="anatomy of a function" class="img-thumbnail">
      <figcaption>Figure 3: All parts that you can find in a function definition.</figcaption>
 </figure>
		
 <p>Notice how the variables <code>level</code> and <code>score</code> in the function definition
		<code>addScore</code> are called <strong>parameters</strong>. However, when we invoke the
		function like in:</p>
		
		<p><code>addScore(3, 10)</code> or <code>addScore(6, 20)</code></p>
		
		the values are called <strong>arguments</strong>. Here is an important lesson:
		
		<p style="text-align: center; font-size:x-large"><strong>You define a function with parameters, you call a function with arguments.</strong></p>
		
		<p>Other important things to remember:
			<ol>
				<li>A function can have zero parameters. You still have to use the parentheses to define it.</li>
				<li>A function might have no <code>return</code> statements. In this case we say that the
				function returns <em>undefined</em>.</li>
		</ol>
		</p>
		
		<p>In the diagram below, we show all possible ways in which a function can be defined. As you
		can imagine, <em>input</em> corresponds to <em>parameters</em> and <em>output</em> to 
		<em>returned values</em></p>
		
		 <figure id="fig4">
      <img src="images/function-diagrams.png" alt="function diagrams" class="img-thumbnail">
      <figcaption>Figure 4: The four different ways of defining a function:<br>
			  A) function has parameters and return value<br>
				B) function has no parameters, but has return value<br>
				C) function has parameters and no return value (but produces side effects)<br>
				D) function has no parameters and no return value (but produces side effects)
			 </figcaption>
 </figure>
		
 <p>After discussing methods as a special kind of functions, we will look at a group of functions
		to categorize them in one of the four groups shown in the graphics.</p>
		
	<h2 id="methods">Methods are Functions too</h2>
	
	<p>From what we have seen so far, we can say that a function is a block of code that has a name,
	that requires zero or more parameters, may return a value or not, and can be invoked an 
	unlimited number of times taking as many arguments as needed. Based on this definition, 
      what do you think of the following 
		code examples?</p>
		
	<pre>
document.querySelector("nav");

var today = new Date();
today.getFullYear();

var myClasses = ["JPN101", "ECON101", "CS110"];
myClasses.push("MATH116");
myClasses.sort();

myClasses.push("ART101");
myClasses.sort();
  </pre>
		
	<p>All the methods indeed conform to the function description: they have a name, they may return a value, and we can invoke them several times with different arguments. (Since these are methods defined by Javascript,
    we don't see the parameters, but the fact that we can call them with arguments, indicates that there
    are parameters in their definition)</p>
		
	<p>Syntactically, we can tell functions from methods apart because a method is <strong>usually</strong>
		invoked using the dot notation: 
		
	<blockquote>
		objectName.methodName(<em>optional parameters</em>);
	</blockquote>
		
	Without such a notation, the Javascript interpreter will complain that it doesn't recognize the method
	name. Also, it will not make sense to use these methods without an object. What is the thing we would 
	like to sort, if we simply write <code>sort()</code>? By providing the object name, we are also providing
	the context (object state) within which the method will operate (either by changing this state, or querying it).
		
	<div class="bs-callout bs-callout-warning">
		<h4>Some Javascript built-in functions are methods</h4>
		<p>We emphasized the word <strong>usually</strong> above, because there are special cases in 
		Javascript where methods are invoked without the dot notation. This is done to simplify writing
		code. In fact, many of the built-in functions we have been using so far, such as:
		<code>alert</code>, <code>prompt</code>, <code>confirm</code> are actually methods of the object
		<code>window</code>. The object <code>window</code> represents the open window on the browser,
		where our HTML code is being rendered. You can verify that <code>alert</code>, etc. are methods
		by typing on the console: <code>window.alert()</code>. To read more about this object,
		refer to the <a href="http://www.w3schools.com/jsref/obj_window.asp">Window object notes on W3Schools.</a></p>
	</div>
		
	<h2 id="global">Global vs. Local Variables</h2>
	
	<p>We have seen variables in many contexts so far. Here is a summary:</p>
		
	<pre>
var age = prompt("How old are you?");         // <strong>at the program level</strong>

for (var i = 0; i < 5; i++) {alert("i="+i);}; // <strong>inside a for loop</strong>

function addScore(level, score) { };          // <strong>as parameters in a function definition</strong>

function displayDate(){
  var today = new Date();                     //<strong>inside the body of a function</strong>
  document.querySelector("#date").innerHTML = today.toLocaleDateString();
}
</pre>
	
<p>No matter where in the program we define them, variables work always in the same way: 
	they reserve some place in the computer memory where they store their value and
	provide a name in able to refer to that value later on. However, the location in 
		the program where we define a variable influences its visibility by other parts 
		of the program. In fact we will be distinugishing betwen <em>global variables</em>
		and <em>local variables</em> in the following way:</p>
		
	<p style="font-weight:bold;font-size:large">If a variable is defined outside a function,  
		it's GLOBAL, if it's declared inside a function, it's LOCAL.</p>
		
	<p>Thus, in the examples shown above, the variables <code>age</code> and <code>i</code>
		are global, because they are outside any function. While the variables
		<code>level</code>, <code>score</code>, and <code>today</code> are local.</p>
		
	<p>Knowing where a variable is defined allows us to know its <strong>scope</strong>,
		that is, where the variable is visible or not. Local variables are visible (or exist)
		only within the body of the function where they were defined. Global variables are
		visible everywhere in the program. What this means is that while we can refer to
		global variables everywhere by their name and expect to get their value back, we
		will be able to refer to local variables only within the body of their function. 
		Attempts to refer to them from outside the function will result in the Javascript
		error message: <em>ReferenceError: variableName is not defined</em>.</p>	
		
	<p>To get a more in-depth understanding for the differences between global and local
		variables, read pages 123-127 of the <a href="/~cs110/LocalOnly/chap4_html5.pdf">
		recommended reading</a>.</p>
		
	<h2 id="examples">Examples of Functions/Methods</h2>
	
	<p>In the following, there is a variety of function and method calls/definitions. Using the four groups 
	of functions depicted in <a href="#fig4">Figure 4</a>, assign each of these functions/methods
	to one of the four groups.</p>
		
	<pre>
var age = prompt("How old are you?"); // prompt

alert("You are " + age + " old.");      // alert

function displayDate(){               // displayDate
  var today = new Date();                     
  document.querySelector("#date").innerHTML = today.toLocaleDateString();
}

document.querySelector("#date");       // querySelector

Math.random();                         // random

function isEligibleToVote(age, citizenship){  //isEligibleToVote
   if (age &lt; 18) {return false;}
   else {
      if (citizenship == "US") {return true;}
      else {return false;}
   }
}

function allowInBar(){                // allowInBar
   var birthdate = prompt("Enter your birthdate (e.g., 03/29/1994)");
   var age = Math.floor((new Date() - new Date(birthdate))/(365*24*3600*1000));
   if (age &lt; 21)  {return false;}
   else {return true;}
}
</pre>
		
  
        
</div><!--end of "col-md-8"-->
            
</div><!--end of "row"-->

<!--#include virtual="/~cs110/modularity/footer.part" -->
    
</div> <!--end of container>
        
        
<!--#include virtual="/~cs110/modularity/bs-footer.part" -->
</body>

</html>